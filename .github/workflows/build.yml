- name: Validar mensajes de commits
  shell: bash  # ⚠️ Se ejecuta en Bash para evitar errores en PowerShell
  run: |
    COMMIT_MSG=$(git log --format=%B -n 1 | tr -d '\n' | tr -d '\r')  # Elimina saltos de línea
    echo "📝 Último commit: '$COMMIT_MSG'"
    
    # Si el commit es un "Merge", se omite la validación
    if [[ "$COMMIT_MSG" =~ ^Merge\ .* ]]; then
      echo "🔄 Merge commit detectado. Omitiendo validación."
      exit 0
    fi

    # Validar commits normales
    if [[ "$COMMIT_MSG" =~ ^(feat|fix|chore|docs|test):\ .* ]]; then
      echo "✅ Commit message válido"
    else
      echo "❌ Commit message inválido. Debe comenzar con 'feat:', 'fix:', 'chore:', 'docs:', 'test:'"
      exit 1
    fi
